# 内存管理系统测试程序

本目录包含了操作系统内存管理模块的测试程序，旨在验证内存管理系统的各项功能是否正常工作。

## 测试程序概述

测试程序分为两部分：

1. **MainMemoryTest.java** - 交互式测试程序，替代了原有的MainWithMemory.java，提供了交互式菜单，用户可以选择不同的测试场景。
2. **MemoryManagerTest.java** - 自动化测试程序，按顺序执行一系列测试用例，验证内存管理系统的各项功能。

## 测试内容

测试程序覆盖了以下内容：

1. **基本内存操作测试**
   - 内存写入和读取操作
   - 数据一致性验证

2. **页面错误测试**
   - 访问未分配的虚拟地址
   - 页面错误处理机制
   - 进程状态变化

3. **内存使用情况**
   - 内存使用率统计
   - 页面分配情况
   - 各进程占用的页面数

4. **页面替换策略测试**
   - 连续访问大量不同页面触发页面替换
   - 验证被换出页面的处理
   - 页面重入的正确性

5. **进程状态查看**
   - 查看进程当前状态
   - 页面错误信息

## 使用方法

### 交互式测试 (MainMemoryTest)

1. 运行 `MainMemoryTest` 类
2. 在菜单中选择想要执行的测试：
   - 输入 1: 运行基本内存测试
   - 输入 2: 运行页面错误测试
   - 输入 3: 显示内存使用情况
   - 输入 4: 运行页面替换测试
   - 输入 5: 查看进程状态
   - 输入 6: 切换调试模式
   - 输入 0: 退出程序

### 自动化测试 (MemoryManagerTest)

直接运行 `MemoryManagerTest` 类，它会按顺序执行所有测试用例，并输出测试结果。

## 实现细节

测试程序使用了以下内存管理系统的核心组件：

- **MemoryManager** - 内存管理器，负责内存分配、地址转换等核心功能
- **PageEntry** - 页表项，记录页面的状态信息
- **PageFaultHandler** - 页面错误处理器，处理页面错误
- **SwappedOutPage** - 被换出的页面，记录被换出页面的信息

## 测试结果解释

- 内存写入/读取成功：数据能够正确写入并读取
- 页面错误处理正确：页面错误能够被正确识别和处理
- 页面替换策略有效：当物理内存不足时，能够正确执行页面替换
- 内存使用率合理：内存资源被合理利用，不会出现内存泄漏

## 注意事项

- 在测试过程中，可能会出现页面错误，这是正常现象，系统会自动处理
- 调试模式可以提供更详细的错误信息，有助于诊断问题
- 页面替换测试可能比较耗时，因为需要访问大量不同的虚拟页面 